"use strict";(self.webpackChunkotai_documentation=self.webpackChunkotai_documentation||[]).push([[415],{1298:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"tutorials/tips/reduce-ram-usage","title":"\u2702\ufe0f Reduce RAM Usage","description":"If you are deploying this image in a RAM-constrained environment, there are a few things you can do to slim down the image.","source":"@site/docs/tutorials/tips/reduce-ram-usage.md","sourceDirName":"tutorials/tips","slug":"/tutorials/tips/reduce-ram-usage","permalink":"/open-tutor-ai-docs/docs/tutorials/tips/reduce-ram-usage","draft":false,"unlisted":false,"editUrl":"https://github.com/pr-elhajji/open-tutor-ai-CE/docs/tutorials/tips/reduce-ram-usage.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"title":"\u2702\ufe0f Reduce RAM Usage"},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\udd0e Open WebUI RAG Tutorial","permalink":"/open-tutor-ai-docs/docs/tutorials/tips/rag-tutorial"},"next":{"title":"\ud83d\udca0 SQLite Database Overview","permalink":"/open-tutor-ai-docs/docs/tutorials/tips/sqlite-database"}}');var i=n(4848),a=n(8453);const s={sidebar_position:10,title:"\u2702\ufe0f Reduce RAM Usage"},r="Reduce RAM Usage",l={},d=[{value:"TLDR",id:"tldr",level:2},{value:"Longer explanation",id:"longer-explanation",level:2}];function c(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"reduce-ram-usage",children:"Reduce RAM Usage"})}),"\n",(0,i.jsx)(t.p,{children:"If you are deploying this image in a RAM-constrained environment, there are a few things you can do to slim down the image."}),"\n",(0,i.jsxs)(t.p,{children:["On a Raspberry Pi 4 (arm64) with version v0.3.10, this was able to reduce idle memory consumption from >1GB to ~200MB (as observed with ",(0,i.jsx)(t.code,{children:"docker container stats"}),")."]}),"\n",(0,i.jsx)(t.h2,{id:"tldr",children:"TLDR"}),"\n",(0,i.jsxs)(t.p,{children:["Set the following environment variables (or the respective UI settings for an existing deployment): ",(0,i.jsx)(t.code,{children:"RAG_EMBEDDING_ENGINE: ollama"}),", ",(0,i.jsx)(t.code,{children:"AUDIO_STT_ENGINE: openai"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"longer-explanation",children:"Longer explanation"}),"\n",(0,i.jsx)(t.p,{children:"Much of the memory consumption is due to loaded ML models. Even if you are using an external language model (OpenAI or unbundled ollama), many models may be loaded for additional purposes."}),"\n",(0,i.jsx)(t.p,{children:"As of v0.3.10 this includes:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Speech-to-text (whisper by default)"}),"\n",(0,i.jsx)(t.li,{children:"RAG embedding engine (defaults to local SentenceTransformers model)"}),"\n",(0,i.jsx)(t.li,{children:"Image generation engine (disabled by default)"}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["The first 2 are enabled and set to local models by default. You can change the models in the admin panel (RAG: Documents category, set it to Ollama or OpenAI, Speech-to-text: Audio section, work with OpenAI or WebAPI).\nIf you are deploying a fresh Docker image, you can also set them with the following environment variables: ",(0,i.jsx)(t.code,{children:"RAG_EMBEDDING_ENGINE: ollama"}),", ",(0,i.jsx)(t.code,{children:"AUDIO_STT_ENGINE: openai"}),". Note that these environment variables have no effect if a ",(0,i.jsx)(t.code,{children:"config.json"})," already exists."]})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>r});var o=n(6540);const i={},a=o.createContext(i);function s(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);