"use strict";(self.webpackChunkotai_documentation=self.webpackChunkotai_documentation||[]).push([[7572],{8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var t=i(6540);const o={},s=t.createContext(o);function r(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(s.Provider,{value:n},e.children)}},9490:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"getting-started/advanced-topics/monitoring","title":"\ud83d\udcca Monitoring","description":"Monitoring your Open TutorAI instance is crucial for ensuring reliable service and quickly identifying issues. This guide covers three levels of monitoring:","source":"@site/docs/getting-started/advanced-topics/monitoring.md","sourceDirName":"getting-started/advanced-topics","slug":"/getting-started/advanced-topics/monitoring","permalink":"/open-tutor-ai-docs/docs/getting-started/advanced-topics/monitoring","draft":false,"unlisted":false,"editUrl":"https://github.com/pr-elhajji/open-tutor-ai-CE/docs/getting-started/advanced-topics/monitoring.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"\ud83d\udcca Monitoring"},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\udd12HTTPS Encryption","permalink":"/open-tutor-ai-docs/docs/getting-started/advanced-topics/https-encryption"},"next":{"title":"\ud83d\udd04 Updating Open TutorAI","permalink":"/open-tutor-ai-docs/docs/getting-started/updating"}}');var o=i(4848),s=i(8453);const r={sidebar_position:6,title:"\ud83d\udcca Monitoring"},l="Monitoring Open TutorAI",c={},a=[{value:"Basic Health Check Endpoint",id:"basic-health-check-endpoint",level:2},{value:"Using Uptime Kuma",id:"using-uptime-kuma",level:3},{value:"Open TutorAI Model Connectivity",id:"open-tutorai-model-connectivity",level:2},{value:"Authentication Setup",id:"authentication-setup",level:3},{value:"Using Uptime Kuma for Model Connectivity",id:"using-uptime-kuma-for-model-connectivity",level:3},{value:"Model Response Testing",id:"model-response-testing",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"monitoring-open-tutorai",children:"Monitoring Open TutorAI"})}),"\n",(0,o.jsx)(n.p,{children:"Monitoring your Open TutorAI instance is crucial for ensuring reliable service and quickly identifying issues. This guide covers three levels of monitoring:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Basic health checks for service availability"}),"\n",(0,o.jsx)(n.li,{children:"Model connectivity verification"}),"\n",(0,o.jsx)(n.li,{children:"Deep health checks with model response testing"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"basic-health-check-endpoint",children:"Basic Health Check Endpoint"}),"\n",(0,o.jsxs)(n.p,{children:["Open TutorAI exposes a health check endpoint at ",(0,o.jsx)(n.code,{children:"/health"})," that returns a 200 OK status when the service is running properly."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"   # No auth needed for this endpoint\n   curl https://your-open-tutoraiinstance/health\n"})}),"\n",(0,o.jsx)(n.h3,{id:"using-uptime-kuma",children:"Using Uptime Kuma"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://github.com/louislam/uptime-kuma",children:"Uptime Kuma"})," is a great, easy to use, open source, self-hosted uptime monitoring tool."]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:'In your Uptime Kuma dashboard, click "Add New Monitor"'}),"\n",(0,o.jsxs)(n.li,{children:["Set the following configuration:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Monitor Type: HTTP(s)"}),"\n",(0,o.jsx)(n.li,{children:"Name: Open TutorAI"}),"\n",(0,o.jsxs)(n.li,{children:["URL: ",(0,o.jsx)(n.code,{children:"http://your-open-tutoraiinstance:8080/health"})]}),"\n",(0,o.jsx)(n.li,{children:"Monitoring Interval: 60 seconds (or your preferred interval)"}),"\n",(0,o.jsx)(n.li,{children:"Retry count: 3 (recommended)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"The health check will verify:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"The web server is responding"}),"\n",(0,o.jsx)(n.li,{children:"The application is running"}),"\n",(0,o.jsx)(n.li,{children:"Basic database connectivity"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"open-tutorai-model-connectivity",children:"Open TutorAI Model Connectivity"}),"\n",(0,o.jsx)(n.p,{children:"To verify that Open TutorAI can successfully connect to and list your configured models, you can monitor the models endpoint. This endpoint requires authentication and checks Open TutorAI's ability to communicate with your model providers."}),"\n",(0,o.jsxs)(n.p,{children:["See ",(0,o.jsx)(n.a,{href:"https://opentutorai.com/getting-started/api-endpoints/#-retrieve-all-models",children:"API documentation"})," for more details about the models endpoint."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'   # See steps below to get an API key\n   curl -H "Authorization: Bearer sk-adfadsflkhasdflkasdflkh" https://your-open-tutoraiinstance/api/models\n'})}),"\n",(0,o.jsx)(n.h3,{id:"authentication-setup",children:"Authentication Setup"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Enable API Keys (Admin required):"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Go to Admin Settings > General"}),"\n",(0,o.jsx)(n.li,{children:'Enable the "Enable API Key" setting'}),"\n",(0,o.jsx)(n.li,{children:"Save changes"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Get your API key ",(0,o.jsx)(n.a,{href:"https://opentutorai.com/getting-started/api-endpoints",children:"docs"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"(Optional), consider making a non-admin user for the monitoring API key"}),"\n",(0,o.jsx)(n.li,{children:"Go to Settings > Account in Open TutorAI"}),"\n",(0,o.jsx)(n.li,{children:"Generate a new API key specifically for monitoring"}),"\n",(0,o.jsx)(n.li,{children:"Copy the API key for use in Uptime Kuma"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Note: If you don't see the option to generate API keys in your Settings > Account, check with your administrator to ensure API keys are enabled."}),"\n",(0,o.jsx)(n.h3,{id:"using-uptime-kuma-for-model-connectivity",children:"Using Uptime Kuma for Model Connectivity"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Create a new monitor in Uptime Kuma:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Monitor Type: HTTP(s) - JSON Query"}),"\n",(0,o.jsx)(n.li,{children:"Name: Open TutorAI Model Connectivity"}),"\n",(0,o.jsxs)(n.li,{children:["URL: ",(0,o.jsx)(n.code,{children:"http://your-open-tutoraiinstance:8080/api/models"})]}),"\n",(0,o.jsx)(n.li,{children:"Method: GET"}),"\n",(0,o.jsx)(n.li,{children:"Expected Status Code: 200"}),"\n",(0,o.jsxs)(n.li,{children:["JSON Query: ",(0,o.jsx)(n.code,{children:"$count(data[*])>0"})]}),"\n",(0,o.jsxs)(n.li,{children:["Expected Value: ",(0,o.jsx)(n.code,{children:"true"})]}),"\n",(0,o.jsx)(n.li,{children:"Monitoring Interval: 300 seconds (5 minutes recommended)"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Configure Authentication:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["In the Headers section, add:","\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'{\n   "Authorization": "Bearer sk-abc123adfsdfsdfsdfsfdsdf"\n}\n'})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Replace ",(0,o.jsx)(n.code,{children:"YOUR_API_KEY"})," with the API key you generated"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Alternative JSON Queries:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"# At least 1 models by ollama provider\n$count(data[owned_by='ollama'])>1\n\n# Check if specific model exists (returns true/false)\n$exists(data[id='gpt-4o'])\n\n# Check multiple models (returns true if ALL exist)\n$count(data[id in ['gpt-4o', 'gpt-4o-mini']]) = 2\n"})}),"\n",(0,o.jsxs)(n.p,{children:["You can test JSONata queries at ",(0,o.jsx)(n.a,{href:"https://try.jsonata.org/",children:"jsonata.org"})," to verify they work with your API response."]}),"\n",(0,o.jsx)(n.h2,{id:"model-response-testing",children:"Model Response Testing"}),"\n",(0,o.jsx)(n.p,{children:"To verify that models can actually process requests, you can monitor the chat completions endpoint. This provides a deeper health check by ensuring models can generate responses."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'# Test model response\ncurl -X POST https://your-open-tutoraiinstance/api/chat/completions \\\n  -H "Authorization: Bearer sk-adfadsflkhasdflkasdflkh" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "messages": [{"role": "user", "content": "Respond with the word HEALTHY"}],\n    "model": "llama3.1",\n    "temperature": 0\n  }\'\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);