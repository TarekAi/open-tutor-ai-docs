"use strict";(self.webpackChunkotai_documentation=self.webpackChunkotai_documentation||[]).push([[7817],{8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>s});var o=t(6540);const i={},a=o.createContext(i);function r(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(a.Provider,{value:n},e.children)}},8538:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"getting-started/updating","title":"\ud83d\udd04 Updating Open TutorAI","description":"Why isn\'t my Open TutorAI updating?","source":"@site/docs/getting-started/updating.mdx","sourceDirName":"getting-started","slug":"/getting-started/updating","permalink":"/open-tutor-ai-docs/docs/getting-started/updating","draft":false,"unlisted":false,"editUrl":"https://github.com/pr-elhajji/open-tutor-ai-CE/docs/getting-started/updating.mdx","tags":[],"version":"current","sidebarPosition":300,"frontMatter":{"sidebar_position":300,"title":"\ud83d\udd04 Updating Open TutorAI"},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\udcca Monitoring","permalink":"/open-tutor-ai-docs/docs/getting-started/advanced-topics/monitoring"},"next":{"title":"\ud83d\udd17 API Endpoints","permalink":"/open-tutor-ai-docs/docs/getting-started/api-endpoints"}}');var i=t(4848),a=t(8453);const r={sidebar_position:300,title:"\ud83d\udd04 Updating Open TutorAI"},s=void 0,d={},c=[{value:"Why isn&#39;t my Open TutorAI updating?",id:"why-isnt-my-open-tutorai-updating",level:2},{value:"Manual Update",id:"manual-update",level:3},{value:"Keeps being logged out after every update?",id:"keeps-being-logged-out-after-every-update",level:2},{value:"Automatically Updating Open TutorAI with Watchtower",id:"automatically-updating-open-tutorai-with-watchtower",level:2},{value:"Option 1: One-time Update",id:"option-1-one-time-update",level:3},{value:"Option 2: Running Watchtower as a Separate Container",id:"option-2-running-watchtower-as-a-separate-container",level:3},{value:"Option 3: Integrating Watchtower with a <code>docker-compose.yml</code> File",id:"option-3-integrating-watchtower-with-a-docker-composeyml-file",level:3},{value:"Persistent Data in Docker Volumes",id:"persistent-data-in-docker-volumes",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"why-isnt-my-open-tutorai-updating",children:"Why isn't my Open TutorAI updating?"}),"\n",(0,i.jsxs)(n.p,{children:["To update your local Docker installation of Open TutorAI to the latest version available, you can either use ",(0,i.jsx)(n.strong,{children:"Watchtower"})," or manually update the container. Follow either of the steps provided below to be guided through updating your existing Open TutorAI image."]}),"\n",(0,i.jsx)(n.h3,{id:"manual-update",children:"Manual Update"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Stop and remove the current container"}),":"]}),"\n",(0,i.jsxs)(n.p,{children:["This will stop the running container and remove it, but it won't delete the data stored in the Docker volume. (Replace ",(0,i.jsx)(n.code,{children:"open-webui"})," with your container's name throughout the updating process if it's different for you.)"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker rm -f open-webui\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Pull the latest Docker image"}),":"]}),"\n",(0,i.jsx)(n.p,{children:"This will update the Docker image, but it won't update the running container or its data."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker pull ghcr.io/open-webui/open-webui:main\n"})}),"\n",(0,i.jsxs)(n.admonition,{type:"info",children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Remove any existing data in the Docker volume (NOT RECOMMENDED UNLESS ABSOLUTELY NECCESSARY!)"}),". Skip this step entirely if not needed and move on to the last step:"]}),(0,i.jsx)(n.p,{children:"If you want to start with a clean slate, you can remove the existing data in the Docker volume. Be careful, as this will delete all your chat histories and other data."}),(0,i.jsxs)(n.p,{children:["The data is stored in a Docker volume named ",(0,i.jsx)(n.code,{children:"open-webui"}),". You can remove it with the following command:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker volume rm open-webui\n"})})]}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Start the container again with the updated image and existing volume attached"}),":"]}),"\n",(0,i.jsxs)(n.p,{children:["If you didn't remove the existing data, this will start the container with the updated image and the existing data. If you removed the existing data, this will start the container with the updated image and a new, empty volume. ",(0,i.jsxs)(n.strong,{children:["For Nvidia GPU support, add ",(0,i.jsx)(n.code,{children:"--gpus all"})," to the docker run command"]})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -d -p 3000:8080 -v open-webui:/app/backend/data --name open-webui ghcr.io/open-webui/open-webui:main\n"})}),"\n",(0,i.jsx)(n.h2,{id:"keeps-being-logged-out-after-every-update",children:"Keeps being logged out after every update?"}),"\n",(0,i.jsxs)(n.p,{children:["If you find yourself getting logged out after every update, ensure that ",(0,i.jsx)(n.code,{children:"WEBUI_SECRET_KEY"})," is set in your environment variables. Without this key being consistently defined, your authentication sessions may be invalidated after updates."]}),"\n",(0,i.jsxs)(n.p,{children:["To set ",(0,i.jsx)(n.code,{children:"WEBUI_SECRET_KEY"})," persistently, include it when running your Docker container:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -d -p 3000:8080 -v open-webui:/app/backend/data --name open-webui -e WEBUI_SECRET_KEY=your_secret_key ghcr.io/open-webui/open-webui:main\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Or, if using ",(0,i.jsx)(n.strong,{children:"docker-compose"}),", add it under the ",(0,i.jsx)(n.code,{children:"environment"})," section:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yml",children:"version: '3'\nservices:\n  open-webui:\n    image: ghcr.io/open-webui/open-webui:main\n    ports:\n      - \"3000:8080\"\n    volumes:\n      - open-webui:/app/backend/data\n    environment:\n      - WEBUI_SECRET_KEY=your_secret_key\n"})}),"\n",(0,i.jsxs)(n.p,{children:["For more details on environment variable settings, check the ",(0,i.jsx)(n.a,{href:"https://docs.openwebui.com/getting-started/env-configuration#security-variables",children:"Open TutorAI documentation on security variables"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"automatically-updating-open-tutorai-with-watchtower",children:"Automatically Updating Open TutorAI with Watchtower"}),"\n",(0,i.jsxs)(n.p,{children:["You can use ",(0,i.jsx)(n.a,{href:"https://containrrr.dev/watchtower/",children:"Watchtower"})," to automate the update process for Open TutorAI. Here are three options:"]}),"\n",(0,i.jsx)(n.h3,{id:"option-1-one-time-update",children:"Option 1: One-time Update"}),"\n",(0,i.jsxs)(n.p,{children:["You can run Watchtower as a one-time update to stop the current container, pull the latest image, and start a new container with the updated image and existing volume attached (",(0,i.jsxs)(n.strong,{children:["For Nvidia GPU support, add ",(0,i.jsx)(n.code,{children:"--gpus all"})," to the docker run command"]}),"):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run --rm --volume /var/run/docker.sock:/var/run/docker.sock containrrr/watchtower --run-once open-webui\n"})}),"\n",(0,i.jsx)(n.h3,{id:"option-2-running-watchtower-as-a-separate-container",children:"Option 2: Running Watchtower as a Separate Container"}),"\n",(0,i.jsx)(n.p,{children:"You can run Watchtower as a separate container that watches and updates your Open TutorAI container:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -d --name watchtower \\\n  --volume /var/run/docker.sock:/var/run/docker.sock \\\n  containrrr/watchtower -i 300 open-webui\n"})}),"\n",(0,i.jsx)(n.p,{children:"This will start Watchtower in detached mode, watching your Open TutorAI container for updates every 5 minutes."}),"\n",(0,i.jsxs)(n.h3,{id:"option-3-integrating-watchtower-with-a-docker-composeyml-file",children:["Option 3: Integrating Watchtower with a ",(0,i.jsx)(n.code,{children:"docker-compose.yml"})," File"]}),"\n",(0,i.jsxs)(n.p,{children:["You can also integrate Watchtower with your ",(0,i.jsx)(n.code,{children:"docker-compose.yml"})," file to automate updates for Open TutorAI (",(0,i.jsxs)(n.strong,{children:["For Nvidia GPU support, add ",(0,i.jsx)(n.code,{children:"--gpus all"})," to the docker run command"]}),"):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yml",children:"version: '3'\nservices:\n  open-webui:\n    image: ghcr.io/open-webui/open-webui:main\n    ports:\n      - \"3000:8080\"\n    volumes:\n      - open-webui:/app/backend/data\n\n  watchtower:\n    image: containrrr/watchtower\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    command: --interval 300 open-webui\n    depends_on:\n      - open-webui\n\nvolumes:\n  open-webui:\n"})}),"\n",(0,i.jsxs)(n.p,{children:["In this example, Watchtower is integrated with the ",(0,i.jsx)(n.code,{children:"docker-compose.yml"})," file and watches the Open TutorAI container for updates every 5 minutes."]}),"\n",(0,i.jsx)(n.h2,{id:"persistent-data-in-docker-volumes",children:"Persistent Data in Docker Volumes"}),"\n",(0,i.jsxs)(n.p,{children:["The data is stored in a Docker volume named ",(0,i.jsx)(n.code,{children:"open-webui"}),". The path to the volume is not directly accessible, but you can inspect the volume with the following command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker volume inspect open-webui\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This will show you the details of the volume, including the mountpoint, which is usually located in ",(0,i.jsx)(n.code,{children:"/var/lib/docker/volumes/open-webui/_data"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"On Windows 10 + WSL 2, Docker volumes are located here (type in the Windows file explorer):"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\\\\wsl$\\docker-desktop\\mnt\\docker-desktop-disk\\data\\docker\\volumes"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"For older versions of Docker (pre-Docker v26.1.4):"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\\\\wsl$\\docker-desktop-data\\data\\docker\\volumes"}),"\n",(0,i.jsx)(n.li,{children:"\\\\wsl$\\docker-desktop-data\\version-pack-data\\community\\docker\\volumes"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.em,{children:["(Windows answer credit to StackOverflow user sarye-haddadi; ",(0,i.jsx)(n.a,{href:"https://stackoverflow.com/questions/43181654/locating-data-volumes-in-docker-desktop-windows",children:"link to original SO post"}),")"]})})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);